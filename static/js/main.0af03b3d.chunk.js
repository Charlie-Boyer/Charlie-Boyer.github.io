(this.webpackJsonptetris=this.webpackJsonptetris||[]).push([[0],{14:function(e,r,t){},15:function(e,r,t){},16:function(e,r,t){},18:function(e,r,t){"use strict";t.r(r);var n=t(1),c=t.n(n),a=t(8),i=t.n(a),u=(t(14),t(2)),o=t(3),s=t(4),p=t(19),l=(t(15),t(16),t(0));var b=function(e){var r=e.piece;return Object(l.jsx)("div",{className:"piece-container",children:null===r||void 0===r?void 0:r.map((function(e,r){return Object(l.jsx)("div",{className:"row ".concat(e),children:e.split("").map((function(e){return"0"===e?Object(l.jsx)("div",{className:"altCell"},Object(p.a)()):Object(l.jsx)("div",{className:"".concat(e,"-block")},Object(p.a)())}))},Object(p.a)())}))})},f=[["0oo0","0oo0"],["0000","iiii","0000","0000"],["00l","lll","000"],["j00","jjj","000"],["0ss","ss0","000"],["zz0","0zz","000"],["0t0","ttt","000"]];function j(e){var r={};r.pattern=f[e],r.class=Object(u.a)(r.pattern.join("")).find((function(e){return"0"!==e})),r.global={x:3,y:0};return console.log(r.global),r.parts=d(f[e],3,0),r}function d(e,r,t){var n=[];return e.forEach((function(e,c){e.split("").forEach((function(e,a){"0"!==e&&n.push({x:r+a,y:t+c})}))})),n}var x=function(){var e=Object(n.useRef)(),r=Object(n.useState)(new Array(22).fill("0000000000").fill("1111111111",21)),t=Object(s.a)(r,2),c=t[0],a=t[1],i=Object(n.useState)(0),x=Object(s.a)(i,2),O=x[0],m=x[1],v=Object(n.useState)(!1),h=Object(s.a)(v,2),y=(h[0],h[1],Object(n.useState)(null)),w=Object(s.a)(y,2),g=w[0],E=w[1],N=Object(n.useState)(null),k=Object(s.a)(N,2),B=k[0],A=k[1];return Object(n.useEffect)((function(){var r;window.addEventListener("keyup",x),window.addEventListener("keydown",f);var t,n=0,c=!1,i=1,s=[0,1,2,3,4,5,6].sort((function(){return Math.random()-.5})),p=!0,l=null;function b(){var e;1===s.length?(e=s[0],s=[0,1,2,3,4,5,6].sort((function(){return Math.random()-.5}))):e=s.shift(),E(s[0]),t=[e,s[0]]}function f(r){switch(r.code){case"ArrowDown":r.repeat||(i=20);break;case"ArrowLeft":if(e.current.piece.parts.find((function(e){return e.x<=0}))||e.current.piece.parts.find((function(r){return"0"!==e.current.baseBoard[r.y][r.x-1]})))return;e.current.piece.parts.forEach((function(e){return e.x=e.x-1})),e.current.piece.global.x--;break;case"ArrowRight":if(e.current.piece.parts.find((function(e){return e.x>=9}))||e.current.piece.parts.find((function(r){return"0"!==e.current.baseBoard[r.y][r.x+1]})))return;e.current.piece.parts.forEach((function(e){return e.x=e.x+1})),e.current.piece.global.x++;break;case"KeyW":var n=e.current.piece.pattern.map((function(r,t){return e.current.piece.pattern.map((function(e){return e[e.length-1-t]})).join("")})),c=d(n,e.current.piece.global.x,e.current.piece.global.y);if(c.find((function(r){return"0"!==e.current.baseBoard[r.y][r.x]})))return;e.current.piece.parts=c,e.current.piece.pattern=n;break;case"KeyQ":p&&(p=!1,null!=l?(e.current.piece=Object(o.a)({},j(l)),l=t[0],A(t[0])):(e.current.piece=Object(o.a)({},j(t[1])),l=t[0],A(t[0]),b()));break;case"ArrowUp":var a=e.current.piece.pattern.map((function(r,t){return e.current.piece.pattern.map((function(r,n){return e.current.piece.pattern[e.current.piece.pattern.length-1-n][t]})).join("")})),u=d(a,e.current.piece.global.x,e.current.piece.global.y);if(u.find((function(r){return"0"!==e.current.baseBoard[r.y][r.x]})))return;e.current.piece.parts=u,e.current.piece.pattern=a}}function x(e){"ArrowDown"===e.code&&(i=1)}function O(s){var l=(s-r)/1e3||0;r=s,(n+=l*i)>1&&(e.current.baseBoard.forEach((function(r,t){"xxxxxxxxxx"===r&&(e.current.baseBoard.splice(t,1),e.current.baseBoard.unshift("0000000000"))})),c&&(b(),e.current.piece=Object(o.a)({},j(t[0])),v(),c=!1),e.current.piece.parts.find((function(e){return e.y>=20}))||e.current.piece.parts.find((function(r){return"0"!==e.current.baseBoard[r.y+1][r.x]}))?(p=!0,e.current.board.forEach((function(r,t){r.includes("0")||21===t||(e.current.board[t]="xxxxxxxxxx",m((function(e){return e+1})))})),c=!0,e.current.baseBoard=Object(u.a)(e.current.board),a(Object(u.a)(e.current.baseBoard))):(e.current.piece.parts.forEach((function(e){return e.y=e.y+1})),e.current.piece.global.y++),n=0),v(),requestAnimationFrame(O)}function v(){for(var r=Object(u.a)(e.current.baseBoard),t=Object(u.a)(e.current.piece.parts.map((function(e){return Object(o.a)({},e)})));!t.find((function(e){return"0"!==r[e.y+1][e.x]}));)t=Object(u.a)(t.map((function(e){return Object(o.a)(Object(o.a)({},e),{},{y:e.y+1})})));t.forEach((function(t,n){var c=r[t.y].split("");c[t.x]=e.current.piece.class.toUpperCase(),r[t.y]=c.join("")})),e.current.piece.parts.forEach((function(t,n){var c=r[t.y].split("");c[t.x]=e.current.piece.class,r[t.y]=c.join("")})),e.current.board=Object(u.a)(r),a(Object(u.a)(r))}return b(),e.current={piece:Object(o.a)({},j(t[0])),board:new Array(22).fill("0000000000").fill("1111111111",21),baseBoard:new Array(22).fill("0000000000").fill("1111111111",21)},requestAnimationFrame(O),function(){window.removeEventListener("keyup",x),window.removeEventListener("keydown",f),cancelAnimationFrame(O)}}),[]),Object(l.jsxs)("div",{className:"app",children:[Object(l.jsxs)("div",{className:"side",children:[Object(l.jsx)("p",{className:"infos",children:"Hold"}),Object(l.jsx)(b,{piece:f[B]}),Object(l.jsxs)("p",{className:"infos",children:["Lines: ",O]})]}),Object(l.jsx)("div",{className:"board",children:c.map((function(e,r){return 21!==r&&0!==r&&Object(l.jsx)("div",{className:"row ".concat(e),children:e.split("").map((function(e){return"0"===e?Object(l.jsx)("div",{className:"cell"},Object(p.a)()):Object(l.jsx)("div",{className:"".concat(e,"-block")},Object(p.a)())}))},Object(p.a)())}))}),Object(l.jsxs)("div",{className:"side",children:[Object(l.jsx)("p",{className:"infos",children:"Next"}),Object(l.jsx)(b,{piece:f[g]})]})]})};i.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(x,{})}),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.0af03b3d.chunk.js.map