(this.webpackJsonptetris=this.webpackJsonptetris||[]).push([[0],{13:function(e,r,t){},14:function(e,r,t){},16:function(e,r,t){"use strict";t.r(r);var n=t(0),c=t.n(n),a=t(8),u=t.n(a),i=(t(13),t(3)),o=t(2),s=t(5),p=t(18),f=(t(14),t(1));var l=function(){var e=Object(n.useRef)(),r=Object(n.useState)(new Array(21).fill("0000000000").fill("1111111111",20)),t=Object(s.a)(r,2),c=t[0],a=t[1],u=Object(n.useState)(1e3),l=Object(s.a)(u,2),b=l[0],d=l[1],j=Object(n.useState)(0),O=Object(s.a)(j,2),y=O[0],x=O[1],w=Object(n.useState)(0),h=Object(s.a)(w,2),v=h[0],m=h[1];function g(e,r,t){var n=[];return e.forEach((function(e,c){e.split("").map((function(e,a){0!=e&&n.push({x:r+a,y:t+c})}))})),n}function E(){var e,r={pattern:(e=[["0000","0oo0","0oo0","0000"],["0000","iiii","0000","0000"],["00l","lll","000"],["j00","jjj","000"],["0ss","ss0","000"],["zz0","0zz","000"],["0t0","ttt","000"]],e[Math.floor(7*Math.random())]),global:{x:0,y:0},parts:[{x:0,y:0}]};return r.class=Object(o.a)(r.pattern.join("")).find((function(e){return 0!=e})),r.global={x:3,y:0},r.parts=g(r.pattern,r.global.x,r.global.y),r}function k(r){switch(r.code){case"ArrowDown":r.repeat||d(50);break;case"ArrowLeft":if(e.current.piece.parts.find((function(e){return e.x<=0}))||e.current.piece.parts.find((function(r){return 0!=e.current.baseBoard[r.y][r.x-1]})))return;e.current.piece.parts.forEach((function(e){return e.x=e.x-1})),e.current.piece.global.x--,x((function(e){return e+1}));break;case"ArrowRight":if(e.current.piece.parts.find((function(e){return e.x>=9}))||e.current.piece.parts.find((function(r){return 0!=e.current.baseBoard[r.y][r.x+1]})))return;e.current.piece.parts.forEach((function(e){return e.x=e.x+1})),e.current.piece.global.x++,x((function(e){return e+1}));break;case"KeyW":var t=e.current.piece.pattern.map((function(r,t){return e.current.piece.pattern.map((function(e){return e[e.length-1-t]})).join("")})),n=g(t,e.current.piece.global.x,e.current.piece.global.y);if(n.find((function(r){return 0!=e.current.baseBoard[r.y][r.x]})))return;e.current.piece.parts=n,e.current.piece.pattern=t,x((function(e){return e+1}));break;case"ArrowUp":var c=e.current.piece.pattern.map((function(r,t){return e.current.piece.pattern.map((function(r,n){return e.current.piece.pattern[e.current.piece.pattern.length-1-n][t]})).join("")})),a=g(c,e.current.piece.global.x,e.current.piece.global.y);if(a.find((function(r){return 0!=e.current.baseBoard[r.y][r.x]})))return;e.current.piece.parts=a,e.current.piece.pattern=c,x((function(e){return e+1}))}}return Object(n.useEffect)((function(){e.current={piece:Object(i.a)({},E()),board:new Array(21).fill("0000000000").fill("1111111111",20),baseBoard:new Array(21).fill("0000000000").fill("1111111111",20)}}),[]),Object(n.useEffect)((function(){window.addEventListener("keyup",t),window.addEventListener("keydown",k);var r=setInterval((function(){e.current.piece.parts.find((function(e){return e.y>=19}))||e.current.piece.parts.find((function(r){return 0!=e.current.baseBoard[r.y+1][r.x]}))?(e.current.board.forEach((function(r,t){r.includes("0")||20==t||(m((function(e){return e+1})),e.current.board.splice(t,1),e.current.board.unshift("0000000000"))})),e.current.piece=Object(i.a)({},E()),e.current.baseBoard=Object(o.a)(e.current.board),x((function(e){return e+1}))):(e.current.piece.parts.forEach((function(e){return e.y=e.y+1})),e.current.piece.global.y++,x((function(e){return e+1})))}),[b]);function t(e){"ArrowDown"==e.code&&d(1e3)}return function(){window.removeEventListener("keyup",t),window.removeEventListener("keydown",k),clearInterval(r)}}),[b]),Object(n.useEffect)((function(){for(var r=Object(o.a)(e.current.baseBoard),t=Object(o.a)(e.current.piece.parts.map((function(e){return Object(i.a)({},e)})));!t.find((function(e){return 0!=r[e.y+1][e.x]}));)t=Object(o.a)(t.map((function(e){return Object(i.a)(Object(i.a)({},e),{},{y:e.y+1})})));t.forEach((function(t,n){var c=r[t.y].split("");c[t.x]=e.current.piece.class.toUpperCase(),r[t.y]=c.join("")})),e.current.piece.parts.forEach((function(t,n){var c=r[t.y].split("");c[t.x]=e.current.piece.class,r[t.y]=c.join("")})),e.current.board=Object(o.a)(r),a(Object(o.a)(r))}),[y]),Object(f.jsxs)("div",{className:"app",children:[Object(f.jsxs)("span",{className:"infos",children:["Score: ",v]}),Object(f.jsx)("div",{className:"board",children:c.map((function(e,r){return 20!=r&&Object(f.jsx)("div",{className:"row",children:e.split("").map((function(e){return Object(f.jsx)("div",{className:"cell ".concat(e,"-block")},Object(p.a)())}))},Object(p.a)())}))})]})};u.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(l,{})}),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.c743cffb.chunk.js.map